{"version":3,"sources":["easyreagent/fullstack/chat.cljs"],"mappings":";AASA,AAAA,AAAAA,eAAA,wCAAA,gEAAA;;AAAA,AAAAA,eAAA,+BAAA,+EAAA;;AAAA,AAAAA,eAAA,4BAAA,kDAAA;;AAAA,AAAAA,eAAA,sCAAA,2DAAA;AAaA,2CAAA,3CAAMC,8FAAeC;AAArB,AACE,kBAAKA;AAAL,AACE,AAACC,qDAA+BD;;AADlC,0FAAA,gIAGG,iBAAAE,qBAAA,iEAAAC;AAAA,AAAA,YAAAC,kBAAA,KAAA;AAAA,AAAA,IAAAD,eAAAA;;AAAA,AAAA,IAAAE,qBAAA,AAAAC,cAAAH;AAAA,AAAA,GAAAE;AAAA,AAAA,IAAAF,eAAAE;AAAA,AAAA,GAAA,AAAAE,6BAAAJ;AAAA,IAAAK,kBAi7E8C,AAAA2B,sBAAAhC;IAj7E9CM,qBAAA,AAAAC,gBAAAF;IAAAG,WAAA,AAAAC,uBAAAH;AAAA,AAAA,GAAA,AAAA,iBAAAI,WAAA;;AAAA,AAAA,GAAA,CAAAA,WAAAJ;AAAA,cAAA,AAAAK,eAAAN,gBAAAK,zCAAMU;AAAN,AAAA,AAAA,AAAAR,uBAAAJ,SAAA,mFAAA,8CACM,AAAA,oFAAQY;;AADd,eAAA,CAAAV,WAAA;;;;AAAA;;;;;AAAA,OAAAG,qBAAA,AAAAC,gBAAAN,UAAA,AAAAO,uDAAA,AAAAC,qBAAAhB;;AAAA,OAAAa,qBAAA,AAAAC,gBAAAN,UAAA;;;AAAA,cAAA,AAAAS,gBAAAjB,1BAAMoB;AAAN,AAAA,OAAAF,eAAA,mFAAA,mJAAA,AAAAH,uDAAA,AAAAI,eAAAnB,3KACM,AAAA,oFAAQoB;;;AADd;;;;GAAA,KAAA;;AAAA,AAAA,OAAArB,mBAAc,AAAA,0FAAW,4CAAA,AAAAsB,5CAACC,4DAAKC,+CAAwB1B;;;;AAI5D,+CAAA,/CAAM2B,sGAAmB3B;AAAzB,AACE,IAAM4B,kBAAgB,gDAAA,hDAACC;AAAvB,AACE,kBAAK7B;AAAL,AAAA,0FAAA,4HAAA,2CAAA,+DAEe,WAAK8B;AAAL,AACE,AAAiBA;;AACjB,0DAAA,AAAAN,1DAACO,8CAAwB/B,4BACC4B;;AAC1B,6CAAA,tCAACI,sBAAOJ;WANzB,mFAAA,4EAAA,qHAAA,2CAAA,wDAAA,8BAAA,qDAAA,mBAAA,kDAAA,mDAAA,mFAAA,sDAAA,2CAAA,qDAAA,SAAA,qDAAA,UAAA,kDAAA,UAAA,kFAAA,mFAAA,0IAAA,2CAAA,qDAAA,SAAA,sDAAA,3oCAQKK,wTAEuCL,2bAIxB5B;;;AAUxB,yCAAA,zCAAMkC,0FAAalC;AAAnB,AAAA,0FAAA,wDAAA,4IAAA,zDAEID,yCAAcC,mGACd2B,6CAAkB3B","names":["cljss.core/css","easyreagent.fullstack.chat/prev-messages","chat-id","easyreagent.fullstack.chat-state/fetch-messages-once","iter__5520__auto__","s__24043","cljs.core/LazySeq","temp__5823__auto__","cljs.core/seq","cljs.core/chunked-seq?","c__5518__auto__","size__5519__auto__","cljs.core/count","b__24045","cljs.core/chunk-buffer","i__24044","cljs.core/-nth","cljs.core/chunk-append","cljs.core/chunk-cons","cljs.core/chunk","iter__24042","cljs.core/chunk-rest","cljs.core/first","cljs.core/cons","cljs.core/rest","message","cljs.core/deref","cljs.core.get","easyreagent.fullstack.chat-state/all-messages","easyreagent.fullstack.chat/new-message-input","curr-text-input","reagent.core.atom","e","easyreagent.fullstack.chat-state/send-message","cljs.core/reset!","easyreagent.components/text-field","easyreagent.fullstack.chat/chat-window","cljs.core/chunk-first"],"sourcesContent":["(ns easyreagent.fullstack.chat\n  (:require\n   [easyreagent.components :as er]\n   [easyreagent.fullstack.chat-state :as chat-state]\n   [reagent.core :as r])\n  (:require-macros [easyreagent.create-component-macros :refer [defc]]\n                   [cljss.core :refer [inject-global]]))\n\n;; DRAFT -- this component is not yet finished\n(inject-global\n {:.er-fullstack-chat-prev-messages-view\n  {:background-color \"grey\"}\n  :.er-fullstack-main-input-box\n  {:height \"auto\"\n   :max-width \"none\"\n   :align-self \"stretch\"}\n  :.er-fullstack-chat-submit\n  {:margin-left \"0.25rem\"}\n  :.er-fullstack-chat-new-message-form\n  {:margin-top \"0.25rem\"}})\n\n\n(defn prev-messages [chat-id]\n  (fn [chat-id]\n    (chat-state/fetch-messages-once chat-id)\n    [:v-box.er-fullstack-chat-prev-messages-view\n     (for [message (:messages (get @chat-state/all-messages chat-id))]\n       [:p (:title message)])]))\n\n\n(defn new-message-input [chat-id]\n  (let [curr-text-input (r/atom \"\")]\n    (fn [chat-id]\n      [:form.er-fullstack-chat-new-message-form\n       {:on-submit (fn [e]\n                     (.preventDefault e)\n                     (chat-state/send-message chat-id\n                                              @curr-text-input)\n                     (reset! curr-text-input \"\"))}\n       [:h-box.items-end\n        [er/text-field {:class \"er-fullstack-main-input-box\"\n                        :name \"message-contents\"\n                        :id \"message-contents\"} curr-text-input]\n        [:input {:type \"hidden\"\n                 :name \"chat-id\"\n                 :id \"chat-id\"\n                 :value chat-id}]\n        [:input.btn.btn-primary.er-fullstack-chat-submit\n         {:type \"Submit\"\n          :value \"Send\"}]]])))\n\n;; maybe accept login requirements?\n;; idk -- what is a chat?\n;; what kind of info should it contain?\n;; what does this do?\n;; what does it look like?\n(defn chat-window [chat-id]\n  [:v-box\n   [prev-messages chat-id]\n   [new-message-input chat-id]])\n"]}