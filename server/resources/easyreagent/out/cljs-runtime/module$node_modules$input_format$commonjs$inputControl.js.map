{
"version":3,
"file":"module$node_modules$input_format$commonjs$inputControl.js",
"lineCount":47,
"mappings":"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",
"sources":["node_modules/input-format/commonjs/inputControl.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$input_format$commonjs$inputControl\"] = function(global,require,module,exports) {\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.onChange = onChange;\nexports.onCut = onCut;\nexports.onKeyDown = onKeyDown;\nexports.onPaste = onPaste;\n\nvar _edit = _interopRequireDefault(require(\"./edit.js\"));\n\nvar _parse3 = _interopRequireDefault(require(\"./parse.js\"));\n\nvar _format2 = _interopRequireDefault(require(\"./format.js\"));\n\nvar _dom = require(\"./dom.js\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\n// Deprecated.\n// I don't know why this function exists.\nfunction onCut(event, input, _parse, _format, on_change) {\n  if ((0, _dom.isReadOnly)(input)) {\n    return;\n  } // The actual cut hasn't happened just yet hence the timeout.\n\n\n  setTimeout(function () {\n    return formatInputText(input, _parse, _format, undefined, on_change);\n  }, 0);\n} // Deprecated.\n// I don't know why this function exists.\n\n\nfunction onPaste(event, input, _parse, _format, on_change) {\n  if ((0, _dom.isReadOnly)(input)) {\n    return;\n  }\n\n  var selection = (0, _dom.getSelection)(input); // If selection is made,\n  // just erase the selected text\n  // prior to pasting\n\n  if (selection) {\n    eraseSelection(input, selection);\n  }\n\n  formatInputText(input, _parse, _format, undefined, on_change);\n}\n\nfunction onChange(event, input, _parse, _format, on_change) {\n  formatInputText(input, _parse, _format, undefined, on_change);\n} // \"Delete\" and \"Backspace\" keys are special\n// in a way that they're not handled by the regular `onChange()` handler\n// and instead are intercepted and re-applied manually.\n// The reason is that normally hitting \"Backspace\" or \"Delete\"\n// results in erasing a character, but that character might be any character,\n// while it would be a better \"user experience\" if it erased not just any character\n// but the closest \"meaningful\" character.\n// For example, if a template is `(xxx) xxx-xxxx`,\n// and the `<input/>` value is `(111) 222-3333`,\n// then, if a user begins erasing the `3333` part via \"Backspace\"\n// and reaches the \"-\" character, then it would just erase the \"-\" character.\n// Nothing wrong with that, but it would be a better \"user experience\"\n// if hitting \"Backspace\" at that position would erase the closest \"meaningful\"\n// character, which would be the rightmost `2`.\n// So, what this `onKeyDown()` handler does is it intercepts\n// \"Backspace\" and \"Delete\" keys and re-applies those operations manually\n// following the logic described above.\n\n\nfunction onKeyDown(event, input, _parse, _format, on_change) {\n  if ((0, _dom.isReadOnly)(input)) {\n    return;\n  }\n\n  var operation = (0, _dom.getOperation)(event);\n\n  switch (operation) {\n    case 'Delete':\n    case 'Backspace':\n      // Intercept this operation and perform it manually.\n      event.preventDefault();\n      var selection = (0, _dom.getSelection)(input); // If a selection is made, just erase the selected text.\n\n      if (selection) {\n        eraseSelection(input, selection);\n        return formatInputText(input, _parse, _format, undefined, on_change);\n      } // Else, perform the (character erasing) operation manually.\n\n\n      return formatInputText(input, _parse, _format, operation, on_change);\n\n    default: // Will be handled normally as part of the `onChange` handler.\n\n  }\n}\n/**\r\n * Erases the selected text inside an `<input/>`.\r\n * @param  {DOMElement} input\r\n * @param  {Selection} selection\r\n */\n\n\nfunction eraseSelection(input, selection) {\n  var text = input.value;\n  text = text.slice(0, selection.start) + text.slice(selection.end);\n  input.value = text;\n  (0, _dom.setCaretPosition)(input, selection.start);\n}\n/**\r\n * Parses and re-formats `<input/>` textual value.\r\n * E.g. when a user enters something into the `<input/>`\r\n * that raw input must first be parsed and the re-formatted properly.\r\n * Is called either after some user input (e.g. entered a character, pasted something)\r\n * or after the user performed an `operation` (e.g. \"Backspace\", \"Delete\").\r\n * @param  {DOMElement} input\r\n * @param  {Function} parse\r\n * @param  {Function} format\r\n * @param  {string} [operation] - The operation that triggered `<input/>` textual value change. E.g. \"Backspace\", \"Delete\".\r\n * @param  {Function} onChange\r\n */\n\n\nfunction formatInputText(input, _parse, _format, operation, on_change) {\n  // Parse `<input/>` textual value.\n  // Get the `value` and `caret` position.\n  var _parse2 = (0, _parse3[\"default\"])(input.value, (0, _dom.getCaretPosition)(input), _parse),\n      value = _parse2.value,\n      caret = _parse2.caret; // If a user performed an operation (\"Backspace\", \"Delete\")\n  // then apply that operation and get the new `value` and `caret` position.\n\n\n  if (operation) {\n    var newValueAndCaret = (0, _edit[\"default\"])(value, caret, operation);\n    value = newValueAndCaret.value;\n    caret = newValueAndCaret.caret;\n  } // Format the `value`.\n  // (and reposition the caret accordingly)\n\n\n  var formatted = (0, _format2[\"default\"])(value, caret, _format);\n  var text = formatted.text;\n  caret = formatted.caret; // Set `<input/>` textual value manually\n  // to prevent React from resetting the caret position\n  // later inside a subsequent `render()`.\n  // Doesn't work for custom `inputComponent`s for some reason.\n\n  input.value = text; // Position the caret properly.\n\n  (0, _dom.setCaretPosition)(input, caret); // If the `<input/>` textual value did change,\n  // then the parsed `value` may have changed too.\n\n  if (on_change) {\n    on_change(value);\n  }\n}\n//# sourceMappingURL=inputControl.js.map\n};"],
"names":["shadow$provide","global","require","module","exports","_interopRequireDefault","obj","__esModule","eraseSelection","input","selection","text","value","slice","start","end","_dom","setCaretPosition","formatInputText","_parse","_format","operation","on_change","_parse2","_parse3","getCaretPosition","caret","newValueAndCaret","_edit","formatted","_format2","Object","defineProperty","onChange","event","undefined","onCut","isReadOnly","setTimeout","onKeyDown","getOperation","preventDefault","getSelection","onPaste"]
}
