{"version":3,"sources":["easyreagent/util.cljs"],"mappings":"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","names":["easyreagent.util/curr-css","cljs.core.atom","easyreagent.util/reload-stylesheets","c__27756__auto__","cljs.core.async.chan","cljs.core.async.impl.dispatch/run","f__27757__auto__","switch__27639__auto__","state_31376","state_val_31377","inst_31360","inst_31361","inst_31362","cljs.core.async.impl.ioc-helpers/take!","inst_31365","inst_31364","inst_31366","cljs.core/deref","inst_31367","inst_31368","statearr-31378","statearr-31379","statearr-31380","inst_31370","statearr-31381","statearr-31382","inst_31373","inst_31374","statearr-31383","cljs.core.async.impl.ioc-helpers/return-chan","statearr-31384","state-machine__27640__auto__","ret-value__27641__auto__","result__27642__auto__","cljs.core/keyword-identical?","ex__27643__auto__","e31385","statearr-31386","cljs.core/seq","statearr-31387","cljs.core/first","state__27758__auto__","statearr-31388","cljs.core.async.impl.ioc-helpers/USER-START-IDX","cljs.core.async.impl.ioc-helpers/run-state-machine-wrapped","cljs-http.client/get","cljs.core/rand-int","cljs.core._EQ_","js/reloadStylesheets","cljs.core/reset!","easyreagent.util/reload-css","js/setInterval","easyreagent.util/dev-reload-css","js/setTimeout","js/mode","easyreagent.util/load-page","location","js/window","easyreagent.util/write-json","clj-map","js/JSON","cljs.core/clj->js","easyreagent.util/read-json-keywordize","json-str","cljs.core.js__GT_clj","easyreagent$util$Renderable$render$dyn","x__5390__auto__","m__5391__auto__","easyreagent.util/render","goog/typeOf","m__5389__auto__","cljs.core/missing-protocol","easyreagent.util/Renderable","this","easyreagent.util/post-redirect","path","params","form","js/document","seq__31389","chunk__31390","count__31391","i__31392","vec__31399","cljs.core.nth","temp__5823__auto__","cljs.core/chunked-seq?","c__5565__auto__","cljs.core/chunk-first","cljs.core/chunk-rest","cljs.core/count","vec__31402","cljs.core/next","k","v","input","cljs.core/name"],"sourcesContent":["(ns easyreagent.util\n  (:require-macros [easyreagent.util])\n  (:require [cljs.core.async :refer [<!]]\n            [cljs-http.client :as http]))\n\n(def curr-css (atom nil))\n\n(defn reload-stylesheets []\n  (cljs.core.async.macros/go\n    (let [output (:body (<! (http/get (str \"resources/global_output.css?v=\" (rand-int 1000000)))))]\n      (when (not (= @curr-css output))\n        (js/reloadStylesheets))\n      (reset! curr-css output))))\n\n(defn reload-css []\n  (js/setInterval\n   (fn [] (reload-stylesheets)) 500))\n\n\n(defn dev-reload-css []\n  (js/setTimeout (fn []\n                 (when (= js/mode \"dev\")\n                   (reload-css)))\n               3000))\n(defn load-page [location]\n  (set! (.-href (.-location js/window)) location))\n  \n(defn write-json [clj-map]\n  (.stringify js/JSON (clj->js clj-map)))\n\n(defn read-json-keywordize [json-str]\n  (js->clj (.parse js/JSON json-str) :keywordize-keys true))\n\n\n(defprotocol Renderable\n  (render [this]))\n\n\n(defn post-redirect [path params]\n  (let [form (.createElement js/document \"form\")]\n    (set! (.-method form) \"POST\")\n    (set! (.-action form) path)\n    (set! (.-style form) \"display: none;\") ; optional: hide the form\n\n    ;; Create hidden input fields from params\n    (doseq [[k v] params]\n      (let [input (.createElement js/document \"input\")]\n        (set! (.-type input) \"hidden\")\n        (set! (.-name input) (name k))\n        (set! (.-value input) (str v)) ; ensure value is a string\n        (.appendChild form input)))\n\n    ;; Append form and submit\n    (.appendChild (.-body js/document) form)\n    (.submit form)))\n"]}