{"version":3,"sources":["easyreagent/fullstack/chat_state.cljs"],"mappings":"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","names":["easyreagent.fullstack.chat-state/all-messages","reagent.core.atom","easyreagent.fullstack.chat-state/get-socket-url","connection-type","js/location","socket-url","easyreagent.fullstack.chat-state/connect-web-socket","chat-id","temp__5823__auto__","chan","js/WebSocket","easyreagent.util/write-json","js/setInterval","cljs.core.swap_BANG_","cljs.core/assoc-in","msg","easyreagent.fullstack.chat-state/zz","cljs.core/update-in","cljs.core/conj","easyreagent.util/read-json-keywordize","easyreagent.fullstack.chat-state/fetch-messages","c__35291__auto__","cljs.core.async.chan","cljs.core.async.impl.dispatch/run","f__35292__auto__","switch__35091__auto__","state_37671","state_val_37672","statearr-37673","cljs.core/identity","inst_37627","inst_37628","inst_37629","inst_37630","cljs.core/PersistentHashMap","inst_37631","inst_37632","inst_37633","cljs_http.client.post","cljs.core.async.impl.ioc-helpers/take!","inst_37635","inst_37646","inst_37647","inst_37648","cljs.core._EQ_","statearr-37674","statearr-37675","inst_37659","result__37527__auto__","inst_37660","inst_37661","inst_37662","statearr-37676","statearr-37677","statearr-37678","inst_37665","statearr-37679","statearr-37681","inst_37650","statearr-37682","inst_37636","inst_37637","inst_37638","statearr-37683","statearr-37684","statearr-37685","inst_37667","statearr-37686","p1__37626#","statearr-37687","statearr-37688","statearr-37689","inst_37669","cljs.core.async.impl.ioc-helpers/return-chan","inst_37654","inst_37655","inst_37656","statearr-37690","statearr-37691","statearr-37692","inst_37643","inst_37644","statearr-37694","statearr-37695","state-machine__35092__auto__","ret-value__35093__auto__","result__35094__auto__","cljs.core/keyword-identical?","ex__35095__auto__","e37696","statearr-37697","cljs.core/seq","statearr-37698","cljs.core/first","state__35293__auto__","statearr-37699","cljs.core.async.impl.ioc-helpers/USER-START-IDX","cljs.core.async.impl.ioc-helpers/run-state-machine-wrapped","cljs.core/assoc","js/alert","easyreagent.fullstack.chat-state/fetch-messages-once","cljs.core/memoize","var_args","args__5772__auto__","len__5766__auto__","i__5767__auto__","argseq__5773__auto__","cljs.core/IndexedSeq","easyreagent.fullstack.chat-state/send-message","p__37704","map__37705","cljs.core/--destructure-map","cljs.core.get","seq37701","G__37702","cljs.core/next","G__37703","self__5751__auto__","message","callback","state_37754","state_val_37755","statearr-37756","inst_37748","statearr-37757","inst_37706","inst_37707","inst_37708","inst_37709","inst_37710","inst_37711","inst_37712","inst_37714","inst_37730","inst_37731","inst_37732","statearr-37758","statearr-37759","statearr-37760","statearr-37761","inst_37719","statearr-37763","inst_37737","inst_37738","inst_37739","statearr-37764","statearr-37765","statearr-37766","statearr-37767","statearr-37769","inst_37715","inst_37716","inst_37717","statearr-37770","statearr-37771","statearr-37772","statearr-37773","inst_37727","inst_37728","statearr-37774","inst_37723","statearr-37775","inst_37752","inst_37750","statearr-37776","statearr-37777","statearr-37778","inst_37742","p1__37700#","inst_37743","inst_37744","inst_37745","statearr-37779","statearr-37780","statearr-37781","statearr-37782","statearr-37783","e37784","statearr-37785","statearr-37786","statearr-37787"],"sourcesContent":["(ns easyreagent.fullstack.chat-state\n  (:require [reagent.core :as r]\n            [easyreagent.util :as er-util]))\n\n\n(def all-messages\n  (r/atom {}))\n\n(defn get-socket-url []\n  (let [connection-type (if (.startsWith (.-host js/location) \"localhost\")\n                          \"ws://\"\n                          \"wss://\")\n        socket-url (str connection-type (.-host js/location)\n                        \"/easyreagent/fullstack/chat/ws\")]\n    socket-url))\n;; (er-util/read-json-keywordize (.-data zz))\n(defn connect-web-socket [chat-id]\n  (when-let [chan (js/WebSocket. (get-socket-url))]\n    ;; (def x11 chan)\n    (set! (.-onopen chan)\n          (fn [] (.send chan (er-util/write-json {:chat-id chat-id}))\n            (js/setInterval #(.send chan \"beat\") 5000)))\n    (swap! all-messages assoc-in\n           [chat-id :socket] chan)\n    (set! (.-onmessage chan)\n          (fn [msg]\n            (def zz msg)\n            (swap! all-messages\n                   update-in\n                   [chat-id :messages]\n                   conj\n                   (er-util/read-json-keywordize (.-data msg)))))\n    ))\n\n(defn fetch-messages [chat-id]\n  (er-util/post-request\n   \"/easyreagent/fullstack/chat/getConversationMessages\"\n   {:chat-id chat-id}\n   :json-response #(swap! all-messages assoc\n                          chat-id %)\n   :failure #(js/alert \"failed to load chat messages\"))\n  (connect-web-socket chat-id))\n\n(def fetch-messages-once (memoize fetch-messages))\n\n\n\n(defn send-message [chat-id message & {:keys [callback]}]\n  (er-util/post-request\n   \"/easyreagent/fullstack/chat/sendNewMessage\"\n   {:chat-id chat-id\n    :message-contents message}\n   :success (or callback identity)\n   :failure #(js/alert (str \"message failed to send\" %))))\n"]}