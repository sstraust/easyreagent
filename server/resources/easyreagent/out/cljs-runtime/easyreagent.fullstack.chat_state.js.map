{"version":3,"sources":["easyreagent/fullstack/chat_state.cljs"],"mappings":"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","names":["easyreagent.fullstack.chat-state/all-messages","reagent.core.atom","easyreagent.fullstack.chat-state/get-socket-url","connection-type","js/location","socket-url","easyreagent.fullstack.chat-state/connect-web-socket","chat-id","temp__5823__auto__","chan","js/WebSocket","easyreagent.util/write-json","js/setInterval","cljs.core.swap_BANG_","cljs.core/assoc-in","msg","easyreagent.fullstack.chat-state/zz","cljs.core/update-in","cljs.core/conj","easyreagent.util/read-json-keywordize","easyreagent.fullstack.chat-state/fetch-messages","c__21516__auto__","cljs.core.async.chan","cljs.core.async.impl.dispatch/run","f__21517__auto__","switch__21451__auto__","state_23785","state_val_23786","statearr-23787","cljs.core/identity","inst_23741","inst_23742","inst_23743","inst_23744","cljs.core/PersistentHashMap","inst_23745","inst_23746","inst_23747","cljs_http.client.post","cljs.core.async.impl.ioc-helpers/take!","inst_23749","inst_23760","inst_23761","inst_23762","cljs.core._EQ_","statearr-23788","statearr-23789","inst_23773","result__23652__auto__","inst_23774","inst_23775","inst_23776","statearr-23790","statearr-23791","statearr-23792","inst_23779","statearr-23793","statearr-23795","inst_23764","statearr-23796","inst_23750","inst_23751","inst_23752","statearr-23797","statearr-23798","statearr-23799","inst_23781","statearr-23800","p1__23740#","statearr-23801","statearr-23802","statearr-23803","inst_23783","cljs.core.async.impl.ioc-helpers/return-chan","inst_23768","inst_23769","inst_23770","statearr-23804","statearr-23805","statearr-23806","inst_23757","inst_23758","statearr-23808","statearr-23809","state-machine__21452__auto__","ret-value__21453__auto__","result__21454__auto__","cljs.core/keyword-identical?","ex__21455__auto__","e23810","statearr-23811","cljs.core/seq","statearr-23812","cljs.core/first","state__21518__auto__","statearr-23813","cljs.core.async.impl.ioc-helpers/USER-START-IDX","cljs.core.async.impl.ioc-helpers/run-state-machine-wrapped","cljs.core/assoc","js/alert","easyreagent.fullstack.chat-state/fetch-messages-once","cljs.core/memoize","var_args","args__5772__auto__","len__5766__auto__","i__5767__auto__","argseq__5773__auto__","cljs.core/IndexedSeq","easyreagent.fullstack.chat-state/send-message","p__23818","map__23819","cljs.core/--destructure-map","cljs.core.get","seq23815","G__23816","cljs.core/next","G__23817","self__5751__auto__","message","callback","state_23868","state_val_23869","statearr-23870","inst_23862","statearr-23871","inst_23820","inst_23821","inst_23822","inst_23823","inst_23824","inst_23825","inst_23826","inst_23828","inst_23844","inst_23845","inst_23846","statearr-23872","statearr-23873","statearr-23874","statearr-23875","inst_23833","statearr-23877","inst_23851","inst_23852","inst_23853","statearr-23878","statearr-23879","statearr-23880","statearr-23881","statearr-23883","inst_23829","inst_23830","inst_23831","statearr-23884","statearr-23885","statearr-23886","statearr-23887","inst_23841","inst_23842","statearr-23888","inst_23837","statearr-23889","inst_23866","inst_23864","statearr-23890","statearr-23891","statearr-23892","inst_23856","p1__23814#","inst_23857","inst_23858","inst_23859","statearr-23893","statearr-23894","statearr-23895","statearr-23896","statearr-23897","e23898","statearr-23899","statearr-23900","statearr-23901"],"sourcesContent":["(ns easyreagent.fullstack.chat-state\n  (:require [reagent.core :as r]\n            [easyreagent.util :as er-util]))\n\n\n(def all-messages\n  (r/atom {}))\n\n(defn get-socket-url []\n  (let [connection-type (if (.startsWith (.-host js/location) \"localhost\")\n                          \"ws://\"\n                          \"wss://\")\n        socket-url (str connection-type (.-host js/location)\n                        \"/easyreagent/fullstack/chat/ws\")]\n    socket-url))\n;; (er-util/read-json-keywordize (.-data zz))\n(defn connect-web-socket [chat-id]\n  (when-let [chan (js/WebSocket. (get-socket-url))]\n    ;; (def x11 chan)\n    (set! (.-onopen chan)\n          (fn [] (.send chan (er-util/write-json {:chat-id chat-id}))\n            (js/setInterval #(.send chan \"beat\") 5000)))\n    (swap! all-messages assoc-in\n           [chat-id :socket] chan)\n    (set! (.-onmessage chan)\n          (fn [msg]\n            (def zz msg)\n            (swap! all-messages\n                   update-in\n                   [chat-id :messages]\n                   conj\n                   (er-util/read-json-keywordize (.-data msg)))))\n    ))\n\n(defn fetch-messages [chat-id]\n  (er-util/post-request\n   \"/easyreagent/fullstack/chat/getConversationMessages\"\n   {:chat-id chat-id}\n   :json-response #(swap! all-messages assoc\n                          chat-id %)\n   :failure #(js/alert \"failed to load chat messages\"))\n  (connect-web-socket chat-id))\n\n(def fetch-messages-once (memoize fetch-messages))\n\n\n\n(defn send-message [chat-id message & {:keys [callback]}]\n  (er-util/post-request\n   \"/easyreagent/fullstack/chat/sendNewMessage\"\n   {:chat-id chat-id\n    :message-contents message}\n   :success (or callback identity)\n   :failure #(js/alert (str \"message failed to send\" %))))\n"]}