{"version":3,"sources":["easyreagent/fullstack/feedback.cljs"],"mappings":";AAUA,+CAAA,/CAAMA;AAAN,AACE,IAAMC,gBAAc,gDAAA,hDAACC;IACfC,aAAW,gDAAA,hDAACD;AADlB,AAEE;AAAA,AAAA,gIAAA,2CAAA,uDAAA,2CAAA,gEAAA,uBAAA,mFAAA,4GAAA,2CAAA,pfACGE,mjBAEU,WAAKC;AAAL,AACE,AAAiBA;;AACjB,0FAAA,gPAAA,nUAACC,kGAEA,6CAAA,AAAAC,gCAAA,2DAAA,AAAAA,3EAAMN,2FAA8BE,sIAC1B,WAAKK;AAAL,AAAQ,sCAAA,0CAAA,2CAAA,uDAAA,AAAAD,4BAAA,sDAAA,AAAAA,7PAACE,2LAESN,kFACDF;;WAX3C,mFAAA,8FAAA,mFAAA,4EAAA,oHAAA,2CAAA,qDAAA,WAAA,wDAAA,4BAAA,mEAAA,iFAAA,mFAAA,8EAAA,0CAAA,mFAAA,uEAAA,wBAAA,qHAAA,2CAAA,wDAAA,OAAA,mEAAA,4CAAA,mFAAA,sHAAA,2CAAA,qDAAA,SAAA,sDAAA,v6CAmBES,8VAGkET,seAG/DU,gOACsCR;;;AAO/C,+CAAA,/CAAMS;AAAN,AAAA,0FAAA,mDAAA,mFAEIZ;;AAEJ,+CAAA,/CAAea;AAAf,AACE,wDAAA,jDAACC,oIACCF,qDACD,wBAAA,xBAAiBG;;;AAEpB,2CAAA,3CAAMC;AAAN,AACE,yIAAA,2EAAA,7MAACC,0DAAQC;;AAIX,uDAAA,vDAAMC;AAAN,AAAA,gIAAA,mFAAA,2EAAA,mFAAA,mDAAA,uyBAAA,mFAAA,4GAAA,mFAAA,mDAAA,yBAAA,mFAAA,liDACGf,yXAGC,wQAAA,mFAAA,6DAAA,wFAAA,mFAAA,6DAAA,9nBAAI,GAAK,AAACgB,uBAAO,AAAA,qFAAQ,AAAA,sGAAgB,AAACJ,ghCAK9B,4CAAK,AAAA,oFAAO,AAAA,sGAAgB,AAACA,sDACxC,wQAAA,AAAA,mFAAA,qDAAA,mFAAA,mDAAA,uBAAA,mFAAA,kWAAA,h+BAAM,GAAK,AAACI,uBAAO,AAAA,qFAAQ,AAAA,sGAAgB,AAACJ,seAG/B,4CAAK,AAAA,qFAAQ,AAAA,sGAAgB,AAACA;;AAKhD,8CAAA,9CAAeK;AAAf,AACE,wDAAA,jDAACP,oIACCK,6DACD,wBAAA,xBAAiBJ;;;AAIpB,sDAAA,tDAAMO;AAAN,AAAA,0FAAA,yDAAA,2CAAA,qDAAA,kCAAA,wDAAA,iBAAA","names":["easyreagent.fullstack.feedback/give-feedback","feedback-text","reagent.core.atom","email-text","easyreagent.components/heroed-content","e","easyreagent.fullstack.chat_state.send_message","cljs.core/deref","x","easyreagent.util/post-redirect","easyreagent.components/text-area","easyreagent.components/text-field","easyreagent.fullstack.feedback/feedback-page","easyreagent.fullstack.feedback/load-feedback","reagent.dom.render","js/document","easyreagent.fullstack.feedback/page-data","cljs.core.js__GT_clj","js/easyreagent.page_data","easyreagent.fullstack.feedback/feedback-success-page","cljs.core/empty?","easyreagent.fullstack.feedback/load-success","easyreagent.fullstack.feedback/give-feedback-button"],"sourcesContent":["(ns easyreagent.fullstack.feedback\n  (:require\n   [easyreagent.components :as er]\n   [easyreagent.fullstack.chat-state :as chat-state]\n   [easyreagent.util :as er-util]\n   [reagent.core :as r]\n   [reagent.dom :as rdom]))\n\n\n\n(defn give-feedback []\n  (let [feedback-text (r/atom \"\")\n        email-text (r/atom \"\")]\n    (fn []\n      [er/heroed-content {:style {:min-height \"40vh\"}}\n       [:form.flex.flex-col.items-center\n     {:on-submit (fn [e]\n                   (.preventDefault e)\n                   (chat-state/send-message\n                    \"feedback-all\"\n                    (str @feedback-text \"\\n\\n Email: \" @email-text)\n                    :callback (fn [x] (er-util/post-redirect\n                                       \"/easyreagent/fullstack/feedback/success\"\n                                       {:email @email-text\n                                        :text @feedback-text}))))}\n        ;; [:div.text-base.self-start {:class \"text-base-content/70\"} \"Your Feedback\"]\n     ;; you probably want a smart-textarea\n     ;; or a markdown textarea component\n     [:v-box.w-screen.max-w-3xl\n      \n      \n      [:v-box.mx-8.mt-4\n     [er/text-area\n      {:name \"feedback\"\n       :class \"!max-w-none h-24 !text-sm\"\n       :placeholder \"Tell me anything! I read everything you send me.\"} feedback-text]\n       [:div.text-sm.mt-6 \"Can I contact you to follow up?\"]\n       [:h-box.text-sm \"Leave e-mail if yes: \"\n        [er/text-field {:class \"mx-4\"\n                        :placeholder \"e-mail\"} email-text]]\n     ;; you want user to be able to optionally provide their e-mail\n     [:input.btn-native.mt-6.cursor-pointer\n      {:type \"submit\"\n       :value \"Give Feedback\"}]]]\n     ]])))\n\n(defn feedback-page []\n  [:div\n   [give-feedback]])\n\n(defn ^:export load-feedback []\n  (rdom/render\n   [feedback-page]\n   (.getElementById js/document \"all-content\")))\n\n(defn page-data []\n  (js->clj js/easyreagent.page_data :keywordize-keys true))\n\n\n\n(defn feedback-success-page []\n  [er/heroed-content\n   [:v-box.max-w-3xl \n    [:div \"Thanks for submitting your feedback!\"]\n    (if (not (empty? (:email (:response-data (page-data)))))\n      [:div.mt-2 \"The gremlins are reading your comments and frantically working on a response.\"]\n      [:div.mt-2 \"You didn't leave an email... the gremlins will respect your solitude, and work furiously on our application.\"])\n    [:v-box.mx-3.border.border-1.mt-2\n     [:div \"Your feedback:\"]\n     [:div.mx-4 (str (:text (:response-data (page-data))))]\n     (when (not (empty? (:email (:response-data (page-data)))))\n      [:h-box\n       [:div \"Your e-mail:\"]\n       [:div.mx-2 (str (:email (:response-data (page-data))))]])]\n    ]\n   ]\n  )\n\n(defn ^:export load-success []\n  (rdom/render\n   [feedback-success-page]\n   (.getElementById js/document \"all-content\")))\n\n\n\n(defn give-feedback-button []\n  [:a.link {:href \"/easyreagent/fullstack/feedback\"\n            :target \"_blank\"}\n   \"Give Feedback\"])\n"]}