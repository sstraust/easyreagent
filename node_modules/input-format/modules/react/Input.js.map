{"version":3,"file":"Input.js","names":["React","useCallback","useRef","PropTypes","onChange","onInputChange","onKeyDown","onInputKeyDown","Input","ref","value","parse","format","InputComponent","inputComponent","rest","internalRef","setRef","instance","current","_onChange","event","_onKeyDown","defaultPrevented","isEmptyValue","text","forwardRef","propTypes","func","isRequired","elementType","type","string","onCut","onPaste","defaultProps","undefined"],"sources":["../../source/react/Input.js"],"sourcesContent":["// This is just `./ReactInput.js` rewritten in Hooks.\r\n\r\nimport React, { useCallback, useRef } from 'react'\r\nimport PropTypes from 'prop-types'\r\n\r\nimport {\r\n\tonChange as onInputChange,\r\n\tonKeyDown as onInputKeyDown\r\n} from '../inputControl.js'\r\n\r\n// Usage:\r\n//\r\n// <ReactInput\r\n// \tvalue={this.state.phone}\r\n// \tonChange={phone => this.setState({ phone })}\r\n// \tparse={character => character}\r\n// \tformat={value => ({ text: value, template: 'xxxxxxxx' })}/>\r\n//\r\nfunction Input({\r\n\tvalue,\r\n\tparse,\r\n\tformat,\r\n\tinputComponent: InputComponent,\r\n\tonChange,\r\n\tonKeyDown,\r\n\t...rest\r\n}, ref) {\r\n\tconst internalRef = useRef();\r\n\tconst setRef = useCallback((instance) => {\r\n\t\tinternalRef.current = instance;\r\n\t\tif (ref) {\r\n\t\t\tif (typeof ref === 'function') {\r\n\t\t\t\tref(instance)\r\n\t\t\t} else {\r\n\t\t\t\tref.current = instance\r\n\t\t\t}\r\n\t\t}\r\n\t}, [ref]);\r\n\tconst _onChange = useCallback((event) => {\r\n\t\treturn onInputChange(\r\n\t\t\tevent,\r\n\t\t\tinternalRef.current,\r\n\t\t\tparse,\r\n\t\t\tformat,\r\n\t\t\tonChange\r\n\t\t)\r\n\t}, [internalRef, parse, format, onChange])\r\n\r\n\tconst _onKeyDown = useCallback((event) => {\r\n\t\tif (onKeyDown) {\r\n\t\t\tonKeyDown(event)\r\n\t\t}\r\n\t\t// If `onKeyDown()` handler above has called `event.preventDefault()`\r\n\t\t// then ignore this `keydown` event.\r\n\t\tif (event.defaultPrevented) {\r\n\t\t\treturn\r\n\t\t}\r\n\t\treturn onInputKeyDown(\r\n\t\t\tevent,\r\n\t\t\tinternalRef.current,\r\n\t\t\tparse,\r\n\t\t\tformat,\r\n\t\t\tonChange\r\n\t\t)\r\n\t}, [internalRef, parse, format, onChange, onKeyDown])\r\n\r\n\treturn (\r\n\t\t<InputComponent\r\n\t\t\t{...rest}\r\n\t\t\tref={setRef}\r\n\t\t\tvalue={format(isEmptyValue(value) ? '' : value).text}\r\n\t\t\tonKeyDown={_onKeyDown}\r\n\t\t\tonChange={_onChange}/>\r\n\t)\r\n}\r\n\r\nInput = React.forwardRef(Input)\r\n\r\nInput.propTypes = {\r\n\t// Parses a single characher of `<input/>` text.\r\n\tparse: PropTypes.func.isRequired,\r\n\r\n\t// Formats `value` into `<input/>` text.\r\n\tformat: PropTypes.func.isRequired,\r\n\r\n\t// Renders `<input/>` by default.\r\n\tinputComponent: PropTypes.elementType.isRequired,\r\n\r\n\t// `<input/>` `type` attribute.\r\n\ttype: PropTypes.string.isRequired,\r\n\r\n\t// Is parsed from <input/> text.\r\n\tvalue: PropTypes.string,\r\n\r\n\t// This handler is called each time `<input/>` text is changed.\r\n\tonChange: PropTypes.func.isRequired,\r\n\r\n\t// Passthrough\r\n\tonKeyDown: PropTypes.func,\r\n\tonCut: PropTypes.func,\r\n\tonPaste: PropTypes.func\r\n}\r\n\r\nInput.defaultProps = {\r\n\t// Renders `<input/>` by default.\r\n\tinputComponent: 'input',\r\n\r\n\t// `<input/>` `type` attribute.\r\n\ttype: 'text'\r\n}\r\n\r\nexport default Input\r\n\r\nfunction isEmptyValue(value) {\r\n\treturn value === undefined || value === null\r\n}"],"mappings":"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"}