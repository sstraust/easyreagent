{"version":3,"file":"Input.js","names":["Input","ref","value","parse","format","InputComponent","inputComponent","onChange","onKeyDown","rest","internalRef","useRef","setRef","useCallback","instance","current","_onChange","event","onInputChange","_onKeyDown","defaultPrevented","onInputKeyDown","isEmptyValue","text","React","forwardRef","propTypes","PropTypes","func","isRequired","elementType","type","string","onCut","onPaste","defaultProps","undefined"],"sources":["../../source/react/Input.js"],"sourcesContent":["// This is just `./ReactInput.js` rewritten in Hooks.\r\n\r\nimport React, { useCallback, useRef } from 'react'\r\nimport PropTypes from 'prop-types'\r\n\r\nimport {\r\n\tonChange as onInputChange,\r\n\tonKeyDown as onInputKeyDown\r\n} from '../inputControl.js'\r\n\r\n// Usage:\r\n//\r\n// <ReactInput\r\n// \tvalue={this.state.phone}\r\n// \tonChange={phone => this.setState({ phone })}\r\n// \tparse={character => character}\r\n// \tformat={value => ({ text: value, template: 'xxxxxxxx' })}/>\r\n//\r\nfunction Input({\r\n\tvalue,\r\n\tparse,\r\n\tformat,\r\n\tinputComponent: InputComponent,\r\n\tonChange,\r\n\tonKeyDown,\r\n\t...rest\r\n}, ref) {\r\n\tconst internalRef = useRef();\r\n\tconst setRef = useCallback((instance) => {\r\n\t\tinternalRef.current = instance;\r\n\t\tif (ref) {\r\n\t\t\tif (typeof ref === 'function') {\r\n\t\t\t\tref(instance)\r\n\t\t\t} else {\r\n\t\t\t\tref.current = instance\r\n\t\t\t}\r\n\t\t}\r\n\t}, [ref]);\r\n\tconst _onChange = useCallback((event) => {\r\n\t\treturn onInputChange(\r\n\t\t\tevent,\r\n\t\t\tinternalRef.current,\r\n\t\t\tparse,\r\n\t\t\tformat,\r\n\t\t\tonChange\r\n\t\t)\r\n\t}, [internalRef, parse, format, onChange])\r\n\r\n\tconst _onKeyDown = useCallback((event) => {\r\n\t\tif (onKeyDown) {\r\n\t\t\tonKeyDown(event)\r\n\t\t}\r\n\t\t// If `onKeyDown()` handler above has called `event.preventDefault()`\r\n\t\t// then ignore this `keydown` event.\r\n\t\tif (event.defaultPrevented) {\r\n\t\t\treturn\r\n\t\t}\r\n\t\treturn onInputKeyDown(\r\n\t\t\tevent,\r\n\t\t\tinternalRef.current,\r\n\t\t\tparse,\r\n\t\t\tformat,\r\n\t\t\tonChange\r\n\t\t)\r\n\t}, [internalRef, parse, format, onChange, onKeyDown])\r\n\r\n\treturn (\r\n\t\t<InputComponent\r\n\t\t\t{...rest}\r\n\t\t\tref={setRef}\r\n\t\t\tvalue={format(isEmptyValue(value) ? '' : value).text}\r\n\t\t\tonKeyDown={_onKeyDown}\r\n\t\t\tonChange={_onChange}/>\r\n\t)\r\n}\r\n\r\nInput = React.forwardRef(Input)\r\n\r\nInput.propTypes = {\r\n\t// Parses a single characher of `<input/>` text.\r\n\tparse: PropTypes.func.isRequired,\r\n\r\n\t// Formats `value` into `<input/>` text.\r\n\tformat: PropTypes.func.isRequired,\r\n\r\n\t// Renders `<input/>` by default.\r\n\tinputComponent: PropTypes.elementType.isRequired,\r\n\r\n\t// `<input/>` `type` attribute.\r\n\ttype: PropTypes.string.isRequired,\r\n\r\n\t// Is parsed from <input/> text.\r\n\tvalue: PropTypes.string,\r\n\r\n\t// This handler is called each time `<input/>` text is changed.\r\n\tonChange: PropTypes.func.isRequired,\r\n\r\n\t// Passthrough\r\n\tonKeyDown: PropTypes.func,\r\n\tonCut: PropTypes.func,\r\n\tonPaste: PropTypes.func\r\n}\r\n\r\nInput.defaultProps = {\r\n\t// Renders `<input/>` by default.\r\n\tinputComponent: 'input',\r\n\r\n\t// `<input/>` `type` attribute.\r\n\ttype: 'text'\r\n}\r\n\r\nexport default Input\r\n\r\nfunction isEmptyValue(value) {\r\n\treturn value === undefined || value === null\r\n}"],"mappings":"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"}